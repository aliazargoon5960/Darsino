{% extends "admin_panel/admin_panel_base.html" %}
{% load humanize %}

{% block content %}
<div class="table-wrapper mt-4">
    <div class="table-header d-flex justify-content-between align-items-center mb-3">
        <h2 class="page-title">لیست سفارش‌ها</h2>
    </div>

    <div class="table-container">
        <table class="custom-table">
            <thead>
                <tr>
                    <th>کاربر</th>
                    <th>مبلغ کل</th>
                    <th>پرداخت شده؟</th>
                    <th>تاریخ پرداخت</th>
                    <th>عملیات</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr>
                    <td>{{ order.user.get_full_name|default:order.user.username }}</td>
                    <td>{{ order.total_price|intcomma }} تومان</td>
                    <td>
                        {% if order.is_paid %}
                            <span class="badge bg-success">بله</span>
                        {% else %}
                            <span class="badge bg-warning">خیر</span>
                        {% endif %}
                    </td>
                    <td>{{ order.payment_date|date:"Y/m/d - H:i"|default:"-" }}</td>
                    <td>
                        <a href="{% url 'admin_panel:order_detail' order.pk %}" class="btn-view">جزئیات</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center text-muted">هیچ سفارشی ثبت نشده است.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
